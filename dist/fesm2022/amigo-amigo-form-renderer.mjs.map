{"version":3,"file":"amigo-amigo-form-renderer.mjs","sources":["../../src/form-group.builder.ts","../../src/auth-token.provider.ts","../../src/amigo-token.interceptor.ts","../../src/config.ts","../../src/amigo-form.service.ts","../../src/amigo-api-execution.service.ts","../../src/amigo-form.component.ts","../../src/amigo-form.component.html","../../amigo-amigo-form-renderer.ts"],"sourcesContent":["import {\n  AbstractControl,\n  FormControl,\n  FormGroup,\n  ValidationErrors,\n  ValidatorFn,\n  Validators,\n} from '@angular/forms';\nimport { FormFieldSchema } from './models';\n\nexport function buildFormGroup(\n  fields: FormFieldSchema[],\n  initialValue?: Record<string, any>\n): FormGroup {\n  const group: Record<string, FormControl> = {};\nconst isNonInput = (t: string) => t === 'card' || t === 'info-card' || t === 'button';\n  for (const f of fields as any[]) {\n\n     const t = (f?.type ?? '').toString();\n     if (isNonInput(t)) continue;\n     \n    // Info cards are purely visual blocks and must NOT create form controls.\n    if (f.type === 'card' || f.type === 'info-card') continue;\n\n    const v = f.validations ?? {};\n\n    // robust required parsing (boolean OR \"true\"/\"false\" strings)\n    const required = f.required === true || f.required === 'true' || v.required === true;\n\n    const validators: ValidatorFn[] = [];\n\n    // required mapping\n    if (required) {\n      if (f.type === 'checkbox') validators.push(Validators.requiredTrue);\n      else if (f.type === 'file') validators.push(fileRequiredValidator());\n      else validators.push(Validators.required);\n    }\n\n    // string length rules\n    if (typeof v.minLength === 'number') validators.push(Validators.minLength(v.minLength));\n    if (typeof v.maxLength === 'number') validators.push(Validators.maxLength(v.maxLength));\n\n    // numeric/date min/max (note: Angular Validators.min/max are numeric; if you want date min/max, handle separately)\n    if (typeof v.min === 'number') validators.push(Validators.min(v.min));\n    if (typeof v.max === 'number') validators.push(Validators.max(v.max));\n\n    // pattern\n    if (v.pattern) validators.push(Validators.pattern(v.pattern));\n\n    //  email validator like template-driven\n    if (f.type === 'email') validators.push(Validators.email);\n\n    //  file-specific validators\n    if (f.type === 'file') {\n      const maxFiles = typeof f.maxFiles === 'number' ? f.maxFiles : f.multiple ? undefined : 1;\n\n      const maxSizeMB = typeof f.maxSizeMB === 'number' ? f.maxSizeMB : undefined;\n\n      const accept = normalizeAccept(f.accept);\n\n      if (maxFiles !== undefined) validators.push(fileMaxFilesValidator(maxFiles));\n      if (maxSizeMB !== undefined) validators.push(fileMaxSizeValidator(maxSizeMB));\n      if (accept) validators.push(fileAcceptValidator(accept));\n    }\n\n    const key = f.name ?? f.id;\n\n    const init =\n      initialValue?.[key] ??\n      (f.type === 'checkbox'\n        ? false\n        : f.type === 'select' || f.type === 'radio'\n        ? null\n        : f.type === 'file'\n        ? null\n        : '');\n\n    group[key] = new FormControl(init, validators);\n  }\n\n  return new FormGroup(group);\n}\n\n// -----------------------\n// File helpers + validators\n// -----------------------\n\nexport function normalizeAccept(a?: string): string | undefined {\n  if (!a) return undefined;\n  const s = String(a).trim().toLowerCase();\n  if (!s) return undefined;\n\n  // handle common composer shorthand like \"pdf\"\n  if (s === 'pdf') return '.pdf,application/pdf';\n\n  // if already looks valid\n  if (s.startsWith('.') || s.includes('/') || s.includes(',')) return a;\n\n  // fallback: treat as extension\n  return `.${s}`;\n}\n\nfunction normalizeFiles(value: any): File[] {\n  if (!value) return [];\n  if (Array.isArray(value)) return value.filter(Boolean);\n  if (typeof FileList !== 'undefined' && value instanceof FileList) {\n    return Array.from(value);\n  }\n  if (typeof File !== 'undefined' && value instanceof File) {\n    return [value];\n  }\n  return [];\n}\n\nfunction fileRequiredValidator(): ValidatorFn {\n  return (control: AbstractControl): ValidationErrors | null => {\n    const files = normalizeFiles(control.value);\n    return files.length ? null : { required: true };\n  };\n}\n\nfunction fileMaxFilesValidator(maxFiles: number): ValidatorFn {\n  return (control: AbstractControl): ValidationErrors | null => {\n    const files = normalizeFiles(control.value);\n    return files.length > maxFiles\n      ? { maxFiles: { max: maxFiles, actual: files.length } }\n      : null;\n  };\n}\n\nfunction fileMaxSizeValidator(maxSizeMB: number): ValidatorFn {\n  const maxBytes = maxSizeMB * 1024 * 1024;\n  return (control: AbstractControl): ValidationErrors | null => {\n    const files = normalizeFiles(control.value);\n    const tooBig = files.find((f) => (f?.size ?? 0) > maxBytes);\n    return tooBig\n      ? {\n          maxSizeMB: {\n            max: maxSizeMB,\n            file: tooBig?.name,\n            actualBytes: tooBig?.size,\n          },\n        }\n      : null;\n  };\n}\n\n/**\n * Accept parser supports:\n * - extensions: .pdf\n * - exact mime: application/pdf\n * - wildcards: image/*\n */\nfunction fileAcceptValidator(accept: string): ValidatorFn {\n  const tokens = (accept || '')\n    .split(',')\n    .map((t) => t.trim())\n    .filter(Boolean);\n\n  return (control: AbstractControl): ValidationErrors | null => {\n    const files = normalizeFiles(control.value);\n    if (!files.length || !tokens.length) return null;\n\n    const bad = files.find((f) => !isAcceptedFile(f, tokens));\n    return bad ? { accept: { accept, file: bad.name, type: bad.type } } : null;\n  };\n}\n\nfunction isAcceptedFile(file: File, tokens: string[]): boolean {\n  const name = (file?.name || '').toLowerCase();\n  const type = (file?.type || '').toLowerCase();\n\n  return tokens.some((t) => {\n    const tok = t.toLowerCase();\n    if (!tok) return true;\n\n    // extension\n    if (tok.startsWith('.')) return name.endsWith(tok);\n\n    // wildcard mime, e.g. image/*\n    if (tok.endsWith('/*')) {\n      const prefix = tok.slice(0, tok.length - 1); // keep trailing '/'\n      return type.startsWith(prefix);\n    }\n\n    // exact mime\n    if (tok.includes('/')) {\n      if (type) return type === tok;\n\n      // fallback when browser doesn't provide MIME type\n      if (tok === 'application/pdf') return name.endsWith('.pdf');\n\n      return false;\n    }\n\n    return false;\n  });\n}\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport type AmigoAuthTokenProvider = () => string | null;\r\n\r\n/**\r\n * Host app will provide this.\r\n * Example: () => authService.getAuthToken()\r\n */\r\nexport const AMIGO_AUTH_TOKEN_PROVIDER = new InjectionToken<AmigoAuthTokenProvider>(\r\n  'AMIGO_AUTH_TOKEN_PROVIDER'\r\n);\r\n","import { Inject, Injectable, Optional } from '@angular/core';\r\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpContextToken } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { AMIGO_AUTH_TOKEN_PROVIDER, AmigoAuthTokenProvider } from './auth-token.provider';\r\nimport { AMIGO_FORM_CONFIG, AmigoFormConfig } from './config';\r\n\r\nexport const AMIGO_SKIP_AUTH = new HttpContextToken<boolean>(() => false);\r\n@Injectable()\r\nexport class AmigoTokenInterceptor implements HttpInterceptor {\r\n  constructor(\r\n    @Optional()\r\n    @Inject(AMIGO_AUTH_TOKEN_PROVIDER)\r\n    private tokenProvider: AmigoAuthTokenProvider | null,\r\n    @Optional() @Inject(AMIGO_FORM_CONFIG) private cfg: AmigoFormConfig | null\r\n  ) {}\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    // If no token provider was registered, just pass through\r\n    if (!this.tokenProvider) return next.handle(req);\r\n\r\n    const token = this.tokenProvider?.();\r\n    if (!token) return next.handle(req);\r\n\r\n    if (req.context.get(AMIGO_SKIP_AUTH)) return next.handle(req);\r\n\r\n    // (Optional) Only attach token for amigo endpoints\r\n    // Helps avoid sending token to 3rd-party URLs.\r\n    if (this.cfg?.apiBaseUrl) {\r\n      const base = this.cfg.apiBaseUrl.replace(/\\/+$/, '');\r\n      const isAmigoCall = req.url.startsWith(base) || req.url.startsWith('/');\r\n      if (!isAmigoCall) return next.handle(req);\r\n    }\r\n\r\n    const authReq = req.clone({\r\n      setHeaders: { Authorization: `Bearer ${token}` },\r\n    });\r\n\r\n    return next.handle(authReq);\r\n  }\r\n}\r\n","import { InjectionToken, Provider } from '@angular/core';\r\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { AmigoTokenInterceptor } from './amigo-token.interceptor';\r\nimport { AMIGO_AUTH_TOKEN_PROVIDER, AmigoAuthTokenProvider } from './auth-token.provider';\r\n\r\nexport interface AmigoFormConfig {\r\n  apiBaseUrl: string;\r\n  endpoints?: {\r\n    getFormById?: (id: string) => string;\r\n  };\r\n}\r\n\r\nexport const AMIGO_FORM_CONFIG = new InjectionToken<AmigoFormConfig>('AMIGO_FORM_CONFIG');\r\n\r\nexport function provideAmigoForm(\r\n  config: AmigoFormConfig,\r\n  tokenProvider?: AmigoAuthTokenProvider\r\n): Provider[] {\r\n  const providers: Provider[] = [\r\n    { provide: AMIGO_FORM_CONFIG, useValue: config },\r\n\r\n    // Register interceptor\r\n    { provide: HTTP_INTERCEPTORS, useClass: AmigoTokenInterceptor, multi: true },\r\n  ];\r\n\r\n  // Optional token provider\r\n  if (tokenProvider) {\r\n    providers.push({ provide: AMIGO_AUTH_TOKEN_PROVIDER, useValue: tokenProvider });\r\n  }\r\n\r\n  return providers;\r\n}\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { AMIGO_FORM_CONFIG, AmigoFormConfig } from './config';\r\nimport { FormActionSchema, FormSchema } from './models';\r\nimport { Observable, throwError } from 'rxjs';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AmigoFormService {\r\n  constructor(private http: HttpClient, @Inject(AMIGO_FORM_CONFIG) private cfg: AmigoFormConfig) {}\r\n\r\n  getFormSchemaById(id: string): Observable<FormSchema> {\r\n    const pathBuilder = this.cfg.endpoints?.getFormById;\r\n    const url = pathBuilder\r\n      ? `${this.cfg.apiBaseUrl}${pathBuilder(id)}`\r\n      : `${this.cfg.apiBaseUrl}/${id}`;\r\n\r\n    return this.http.get<any>(url);\r\n  }\r\n\r\n  /**\r\n   * Calls submit API based on FormActionSchema.\r\n   * - Auto uses FormData if any file exists in payload (or contentType='multipart')\r\n   * - GET uses query params\r\n   */\r\n  submitByAction(\r\n    action: FormActionSchema,\r\n    payload: Record<string, any>,\r\n    schema?: FormSchema\r\n  ): Observable<any> {\r\n    const method = (action?.method ?? 'POST').toUpperCase() as\r\n      | 'GET'\r\n      | 'POST'\r\n      | 'PUT'\r\n      | 'PATCH'\r\n      | 'DELETE';\r\n\r\n    const submitApiUrl = (action?.submitApiUrl || '').trim();\r\n    if (!submitApiUrl) {\r\n      return throwError(() => new Error('No submitApiUrl provided in schema.actions'));\r\n    }\r\n\r\n    const url = this.resolveUrl(submitApiUrl);\r\n\r\n    // optionally wrap payload\r\n    const finalPayload =\r\n      action.payloadKey && action.payloadKey.trim()\r\n        ? { [action.payloadKey.trim()]: payload }\r\n        : payload;\r\n\r\n    // Decide multipart\r\n    const mode = action.contentType ?? 'auto';\r\n    const hasFiles = this.payloadHasFiles(finalPayload);\r\n    const useMultipart = mode === 'multipart' || (mode === 'auto' && hasFiles);\r\n\r\n    if (method === 'GET') {\r\n      const params = this.toHttpParams(finalPayload);\r\n      return this.http.request(method, url, { params });\r\n    }\r\n\r\n    if (useMultipart) {\r\n      const formData = this.toFormData(finalPayload);\r\n      return this.http.request(method, url, { body: formData });\r\n    }\r\n\r\n    // default JSON\r\n    return this.http.request(method, url, { body: finalPayload });\r\n  }\r\n\r\n  private resolveUrl(submitApiUrl: string): string {\r\n    // absolute URL\r\n    if (/^https?:\\/\\//i.test(submitApiUrl)) return submitApiUrl;\r\n\r\n    // relative URL => prefix apiBaseUrl\r\n    const base = (this.cfg.apiBaseUrl || '').replace(/\\/+$/, '');\r\n    const path = submitApiUrl.startsWith('/') ? submitApiUrl : `/${submitApiUrl}`;\r\n    return `${base}${path}`;\r\n  }\r\n\r\n  private payloadHasFiles(obj: any): boolean {\r\n    if (!obj) return false;\r\n\r\n    const isFile = (v: any) => typeof File !== 'undefined' && v instanceof File;\r\n\r\n    const isFileList = (v: any) => typeof FileList !== 'undefined' && v instanceof FileList;\r\n\r\n    if (isFile(obj) || isFileList(obj)) return true;\r\n\r\n    if (Array.isArray(obj)) return obj.some((x) => this.payloadHasFiles(x));\r\n\r\n    if (typeof obj === 'object') {\r\n      return Object.values(obj).some((v) => this.payloadHasFiles(v));\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private toFormData(payload: any): FormData {\r\n    const fd = new FormData();\r\n\r\n    const appendValue = (key: string, value: any) => {\r\n      if (value === undefined || value === null) return;\r\n\r\n      // File\r\n      if (typeof File !== 'undefined' && value instanceof File) {\r\n        fd.append(key, value, value.name);\r\n        return;\r\n      }\r\n\r\n      // FileList\r\n      if (typeof FileList !== 'undefined' && value instanceof FileList) {\r\n        Array.from(value).forEach((f) => fd.append(key, f, f.name));\r\n        return;\r\n      }\r\n\r\n      // Array\r\n      if (Array.isArray(value)) {\r\n        // if it's array of Files => append multiple under same key\r\n        value.forEach((v) => appendValue(key, v));\r\n        return;\r\n      }\r\n\r\n      // Object => stringify\r\n      if (typeof value === 'object') {\r\n        fd.append(key, JSON.stringify(value));\r\n        return;\r\n      }\r\n\r\n      // primitives\r\n      fd.append(key, String(value));\r\n    };\r\n\r\n    Object.entries(payload || {}).forEach(([k, v]) => appendValue(k, v));\r\n    return fd;\r\n  }\r\n\r\n  private toHttpParams(payload: any): HttpParams {\r\n    let params = new HttpParams();\r\n\r\n    const add = (key: string, value: any) => {\r\n      if (value === undefined || value === null) return;\r\n\r\n      if (Array.isArray(value)) {\r\n        value.forEach((v) => add(key, v));\r\n        return;\r\n      }\r\n\r\n      if (typeof value === 'object') {\r\n        // objects in GET -> stringify\r\n        params = params.append(key, JSON.stringify(value));\r\n        return;\r\n      }\r\n\r\n      params = params.append(key, String(value));\r\n    };\r\n\r\n    Object.entries(payload || {}).forEach(([k, v]) => add(k, v));\r\n    return params;\r\n  }\r\n}\r\n","import { Inject, Injectable, Optional } from '@angular/core';\r\nimport { HttpClient, HttpContext, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\n\r\nimport { AMIGO_FORM_CONFIG, AmigoFormConfig } from './config';\r\nimport { AMIGO_AUTH_TOKEN_PROVIDER, AmigoAuthTokenProvider } from './auth-token.provider';\r\nimport { AMIGO_SKIP_AUTH } from './amigo-token.interceptor';\r\nimport { ApiEndpointConfig, KeyValuePair } from './models';\r\n\r\nexport type TokenFrom = 'LOCAL_STORAGE' | 'SESSION_STORAGE' | 'CUSTOM_CALLBACK';\r\nexport type AuthType = 'NONE' | 'BEARER';\r\n\r\nexport interface BearerAuthConfig {\r\n  secured?: boolean;\r\n  authType?: AuthType;\r\n  tokenFrom?: TokenFrom;\r\n  tokenKey?: string; // e.g. access_token\r\n}\r\n\r\nexport interface ExecuteOptions {\r\n  /** values from the reactive form (normalized) */\r\n  formValue?: Record<string, any>;\r\n  /** true => do NOT let interceptor attach global token */\r\n  skipGlobalAuth?: boolean;\r\n  /** optional per-request bearer auth (mainly for select API) */\r\n  bearerAuth?: BearerAuthConfig;\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AmigoApiExecutionService {\r\n  constructor(\r\n    private http: HttpClient,\r\n    @Optional() @Inject(AMIGO_FORM_CONFIG) private cfg: AmigoFormConfig | null,\r\n    @Optional()\r\n    @Inject(AMIGO_AUTH_TOKEN_PROVIDER)\r\n    private tokenProvider: AmigoAuthTokenProvider | null\r\n  ) {}\r\n\r\n  execute(endpoint: ApiEndpointConfig, opts: ExecuteOptions = {}): Observable<any> {\r\n    if (!endpoint?.url) return throwError(() => new Error('API endpoint url is required'));\r\n\r\n    const method = (endpoint.method || 'GET').toUpperCase() as any;\r\n    const url = this.resolveUrl(endpoint.url);\r\n\r\n    const params = this.toHttpParams(endpoint.queryParams, opts.formValue);\r\n    const headersObj = this.toHeaderRecord(endpoint.headers, opts.formValue);\r\n\r\n    // select-options requirement: attach Authorization only when explicitly configured\r\n    const authHeader = this.buildBearerHeader(opts.bearerAuth);\r\n    const headers = new HttpHeaders({\r\n      ...headersObj,\r\n      ...(authHeader ? authHeader : {}),\r\n    });\r\n\r\n    const context = opts.skipGlobalAuth ? new HttpContext().set(AMIGO_SKIP_AUTH, true) : undefined;\r\n\r\n    // Body only for non-GET\r\n    const body =\r\n      method === 'GET' ? undefined : this.buildBody(endpoint.bodyMapping, opts.formValue);\r\n\r\n    // Auto multipart if files exist (same logic as submit)\r\n    const useMultipart = method !== 'GET' && this.payloadHasFiles(body);\r\n    const finalBody = useMultipart ? this.toFormData(body) : body;\r\n\r\n    return this.http.request(method, url, {\r\n      body: finalBody,\r\n      headers,\r\n      params,\r\n      context,\r\n    });\r\n  }\r\n\r\n  // ---------- helpers ----------\r\n  private resolveUrl(u: string): string {\r\n    if (/^https?:\\/\\//i.test(u)) return u;\r\n    const base = (this.cfg?.apiBaseUrl || '').replace(/\\/+$/, '');\r\n    const path = u.startsWith('/') ? u : `/${u}`;\r\n    return base ? `${base}${path}` : path;\r\n  }\r\n\r\n  private buildBearerHeader(auth?: BearerAuthConfig): Record<string, string> | null {\r\n    if (!auth?.secured) return null;\r\n    if (auth.authType !== 'BEARER') return null;\r\n\r\n    const tokenKey = auth.tokenKey || 'access_token';\r\n    const token =\r\n      auth.tokenFrom === 'SESSION_STORAGE'\r\n        ? sessionStorage.getItem(tokenKey)\r\n        : auth.tokenFrom === 'CUSTOM_CALLBACK'\r\n        ? this.tokenProvider?.() ?? null\r\n        : localStorage.getItem(tokenKey);\r\n\r\n    return token ? { Authorization: `Bearer ${token}` } : null;\r\n  }\r\n\r\n  private toHeaderRecord(pairs?: KeyValuePair[], formValue?: any): Record<string, string> {\r\n    const out: Record<string, string> = {};\r\n    for (const p of pairs || []) {\r\n      const k = (p?.key || '').trim();\r\n      if (!k) continue;\r\n      out[k] = this.interpolate(String(p.value ?? ''), formValue);\r\n    }\r\n    return out;\r\n  }\r\n\r\n  private toHttpParams(pairs?: KeyValuePair[], formValue?: any): HttpParams {\r\n    let params = new HttpParams();\r\n    for (const p of pairs || []) {\r\n      const k = (p?.key || '').trim();\r\n      if (!k) continue;\r\n      const v = this.interpolate(String(p.value ?? ''), formValue);\r\n      params = params.set(k, v);\r\n    }\r\n    return params;\r\n  }\r\n\r\n  private buildBody(mapping?: Record<string, string>, formValue?: any): any {\r\n    if (!mapping || !Object.keys(mapping).length) return formValue ?? {};\r\n    const body: Record<string, any> = {};\r\n    for (const [k, expr] of Object.entries(mapping)) {\r\n      body[k] = this.resolveExpr(expr, formValue);\r\n    }\r\n    return body;\r\n  }\r\n\r\n  private resolveExpr(expr: string, ctx: any): any {\r\n    if (expr == null) return null;\r\n    const s = String(expr);\r\n    const exact = s.match(/^{{\\s*([^}]+)\\s*}}$/);\r\n    if (exact) return this.getByPath(ctx, exact[1].trim());\r\n    if (s.includes('{{')) return this.interpolate(s, ctx);\r\n\r\n    // convenience: \"employee.id\" becomes a lookup if it exists\r\n    const v = this.getByPath(ctx, s);\r\n    return v === undefined ? s : v;\r\n  }\r\n\r\n  private interpolate(tpl: string, ctx: any): string {\r\n    return tpl.replace(/{{\\s*([^}]+)\\s*}}/g, (_, path) => {\r\n      const v = this.getByPath(ctx, String(path).trim());\r\n      return v == null ? '' : String(v);\r\n    });\r\n  }\r\n\r\n  private getByPath(obj: any, path: string): any {\r\n    if (!obj || !path) return undefined;\r\n    return path.split('.').reduce((acc, key) => (acc == null ? undefined : acc[key]), obj);\r\n  }\r\n\r\n  private payloadHasFiles(obj: any): boolean {\r\n    if (!obj) return false;\r\n    const isFile = (v: any) => typeof File !== 'undefined' && v instanceof File;\r\n    const isFileList = (v: any) => typeof FileList !== 'undefined' && v instanceof FileList;\r\n    if (isFile(obj) || isFileList(obj)) return true;\r\n    if (Array.isArray(obj)) return obj.some((x) => this.payloadHasFiles(x));\r\n    if (typeof obj === 'object') return Object.values(obj).some((v) => this.payloadHasFiles(v));\r\n    return false;\r\n  }\r\n\r\n  private toFormData(payload: any): FormData {\r\n    const fd = new FormData();\r\n\r\n    const append = (key: string, value: any) => {\r\n      if (value === undefined || value === null) return;\r\n      if (typeof File !== 'undefined' && value instanceof File) {\r\n        fd.append(key, value, value.name);\r\n        return;\r\n      }\r\n      if (Array.isArray(value)) {\r\n        value.forEach((v, i) => append(`${key}[${i}]`, v));\r\n        return;\r\n      }\r\n      if (typeof value === 'object') {\r\n        Object.entries(value).forEach(([k, v]) => append(`${key}.${k}`, v));\r\n        return;\r\n      }\r\n      fd.append(key, String(value));\r\n    };\r\n\r\n    Object.entries(payload || {}).forEach(([k, v]) => append(k, v));\r\n    return fd;\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, NgZone, OnChanges, Output, SimpleChanges } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormGroup, AbstractControl } from '@angular/forms';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\nimport { FormSchema, FormFieldSchema, FormType, FormActionSchema } from './models';\r\nimport { AmigoFormService } from './amigo-form.service';\r\nimport { buildFormGroup, normalizeAccept } from './form-group.builder';\r\nimport { AmigoApiExecutionService } from './amigo-api-execution.service';\r\n@Component({\r\n  selector: 'amigo-form',\r\n  standalone: true,\r\n  imports: [CommonModule, ReactiveFormsModule],\r\n  templateUrl: './amigo-form.component.html',\r\n  styleUrl: './amigo-form.component.css',\r\n})\r\nexport class AmigoFormComponent implements OnChanges {\r\n  @Input() formId?: string;\r\n  @Input() schema?: FormSchema;\r\n  @Input() initialValue?: Record<string, any>;\r\n\r\n  /**\r\n   * Emits:\r\n   * - if NO submitApiUrl => raw form value (backward compatible)\r\n   * - if submitApiUrl exists => { payload, response, action }\r\n   */\r\n  @Output() submitted = new EventEmitter<any>();\r\n\r\n  /** Emits error object when API submit fails */\r\n  @Output() submitFailed = new EventEmitter<any>();\r\n\r\n  @Output() cancelled = new EventEmitter<void>();\r\n\r\n  isLoading = false;\r\n  loadError: string | null = null;\r\n\r\n  isSubmitting = false;\r\n  submitError: string | null = null;\r\n\r\n  resolvedSchema: any | null = null;\r\n  form: FormGroup | null = null;\r\n\r\n  activeStepIndex = 0;\r\n\r\n  isSubmitHovered = false;\r\n  isCancelHovered = false;\r\n\r\n  buttonLoading: Record<string, boolean> = {};\r\n  buttonFeedback: Record<string, { type: 'success' | 'error'; message: string }> = {};\r\n\r\n  constructor(\r\n    private formService: AmigoFormService,\r\n    private cdr: ChangeDetectorRef,\r\n    private zone: NgZone,\r\n    private apiExec: AmigoApiExecutionService\r\n  ) {}\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['schema'] || changes['formId']) {\r\n      this.init();\r\n    }\r\n    if (changes['initialValue'] && this.resolvedSchema) {\r\n      // If you want to patch when initialValue changes:\r\n      this.form = buildFormGroup(this.resolvedSchema!.fields, this.initialValue);\r\n    }\r\n  }\r\n\r\n  private init(): void {\r\n    this.loadError = null;\r\n\r\n    // If schema is provided directly\r\n    if (this.schema) {\r\n      this.applySchema(this.schema as any);\r\n      return;\r\n    }\r\n\r\n    // If neither schema nor formId\r\n    if (!this.formId) {\r\n      this.resolvedSchema = null;\r\n      this.form = null;\r\n      this.loadError = 'No schema or formId provided.';\r\n      this.cdr.detectChanges();\r\n      return;\r\n    }\r\n\r\n    // Start loading\r\n    this.isLoading = true;\r\n    this.cdr.detectChanges(); //  ensure UI shows loading immediately\r\n\r\n    this.formService.getFormSchemaById(this.formId).subscribe({\r\n      next: (res: any) => {\r\n        //  force inside Angular CD context to update UI\r\n        this.zone.run(() => {\r\n          this.applySchema(res?.form_data ?? res);\r\n          this.isLoading = false;\r\n          this.cdr.detectChanges(); //  render immediately\r\n        });\r\n      },\r\n      error: (e) => {\r\n        this.zone.run(() => {\r\n          this.isLoading = false;\r\n          this.loadError = e?.message ?? 'Failed to load form schema';\r\n          this.cdr.detectChanges();\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  private applySchema(raw: any): void {\r\n    const s: any = typeof raw === 'string' ? JSON.parse(raw) : raw;\r\n    const formType: FormType = (s?.formType ?? 'single') as FormType;\r\n\r\n    const fields = (s?.fields ?? []).map((f: any) => {\r\n      if (f?.type === 'file') return { ...f, accept: normalizeAccept(f.accept) };\r\n      return f;\r\n    });\r\n\r\n    this.resolvedSchema = {\r\n      ...s,\r\n      formType,\r\n      layout: s?.layout ?? { rows: 1, columns: 1 },\r\n      fields,\r\n      steps: s?.steps ?? [],\r\n      sections: s?.sections ?? [],\r\n      spacing: s?.spacing ?? {},\r\n      style: s?.style ?? {},\r\n      actions: s?.actions ?? {},\r\n    };\r\n\r\n    this.activeStepIndex = 0;\r\n    this.form = buildFormGroup(this.resolvedSchema!.fields, this.initialValue);\r\n    this.patchInitialValue();\r\n  }\r\n\r\n  // ---------- info cards ----------\r\n  isCard(field: FormFieldSchema | any): boolean {\r\n    const t = (field as any)?.type;\r\n    return t === 'card' || t === 'info-card';\r\n  }\r\n\r\n  cardIcon(field: any): string {\r\n    return field?.card?.icon || '';\r\n  }\r\n\r\n  cardTitle(field: any): string {\r\n    return field?.card?.title || field?.label || 'Info';\r\n  }\r\n\r\n  cardBody(field: any): string {\r\n    return field?.card?.body || '';\r\n  }\r\n\r\n  cardStyle(field: any): Record<string, any> {\r\n    const cs = field?.card?.style ?? {};\r\n    const borderWidth = cs.borderWidth ?? 1;\r\n    const borderRadius = cs.borderRadius ?? 12;\r\n    const borderColor = cs.borderColor ?? '#BBF7D0';\r\n    const backgroundColor = cs.backgroundColor ?? '#F0FDF4';\r\n    const textColor = cs.textColor ?? '#166534';\r\n\r\n    return {\r\n      borderStyle: 'solid',\r\n      borderWidth: `${borderWidth}px`,\r\n      borderColor,\r\n      borderRadius: `${borderRadius}px`,\r\n      backgroundColor,\r\n      color: textColor,\r\n      padding: '12px',\r\n      display: 'flex',\r\n      gap: '12px',\r\n      alignItems: 'flex-start',\r\n    };\r\n  }\r\n\r\n  cardIconStyle(field: any): Record<string, any> {\r\n    const cs = field?.card?.style ?? {};\r\n    const textColor = cs.textColor ?? '#166534';\r\n    return {\r\n      color: cs.iconColor ?? textColor,\r\n      fontSize: '18px',\r\n      lineHeight: '1',\r\n      marginTop: '2px',\r\n    };\r\n  }\r\n\r\n  // ---------- keys & controls ----------\r\n  controlKey(field: any): string {\r\n    return field?.name ?? field?.id;\r\n  }\r\n\r\n  ctrl(field: any): AbstractControl | null {\r\n    return this.form?.get(this.controlKey(field)) ?? null;\r\n  }\r\n\r\n  showError(field: any): boolean {\r\n    const c = this.ctrl(field);\r\n    return !!(c && c.invalid && (c.touched || c.dirty));\r\n  }\r\n\r\n  // ---------- file inputs ----------\r\n  onFileChange(evt: Event, field: FormFieldSchema): void {\r\n    const input = evt.target as HTMLInputElement;\r\n    const files = input?.files ? Array.from(input.files) : [];\r\n\r\n    const key = this.controlKey(field);\r\n    const c = this.form?.get(key);\r\n    if (!c) return;\r\n\r\n    let normalized = field.multiple ? files : files.slice(0, 1);\r\n\r\n    if (typeof field.maxFiles === 'number' && field.maxFiles > 0) {\r\n      normalized = normalized.slice(0, field.maxFiles);\r\n    }\r\n\r\n    c.setValue(field.multiple ? normalized : normalized[0] ?? null);\r\n    c.markAsTouched();\r\n    c.updateValueAndValidity();\r\n  }\r\n\r\n  fileNames(field: FormFieldSchema): string[] {\r\n    const v = this.ctrl(field)?.value;\r\n    if (!v) return [];\r\n    if (Array.isArray(v)) return v.map((f: File) => f?.name).filter(Boolean);\r\n    if (v instanceof File) return [v.name];\r\n    if (typeof FileList !== 'undefined' && v instanceof FileList) {\r\n      return Array.from(v)\r\n        .map((f) => f?.name)\r\n        .filter(Boolean);\r\n    }\r\n    return [];\r\n  }\r\n\r\n  clearFiles(field: FormFieldSchema, inputEl: HTMLInputElement): void {\r\n    const c = this.ctrl(field);\r\n    if (!c) return;\r\n    c.setValue(null);\r\n    c.markAsTouched();\r\n    c.updateValueAndValidity();\r\n    if (inputEl) inputEl.value = '';\r\n  }\r\n\r\n  // ---------- visibility helpers ----------\r\n  trackByFieldId = (_: number, field: any) => field?.id ?? field?.name ?? _;\r\n\r\n  get orderedSteps() {\r\n    const s = this.resolvedSchema;\r\n    return [...(s?.steps ?? [])].sort((a, b) => (a?.order ?? 0) - (b?.order ?? 0));\r\n  }\r\n\r\n  get totalSteps(): number {\r\n    return this.orderedSteps.length;\r\n  }\r\n\r\n  get isMultiStep(): boolean {\r\n    return this.resolvedSchema?.formType === 'multi' && this.totalSteps > 0;\r\n  }\r\n\r\n  get visibleFields(): FormFieldSchema[] {\r\n    const s = this.resolvedSchema;\r\n    if (!s) return [];\r\n\r\n    if (s.formType === 'multi' && this.totalSteps > 0) {\r\n      const step = this.orderedSteps[this.activeStepIndex];\r\n      const ids = new Set(step?.fieldIds ?? []);\r\n      if (!ids.size) return [];\r\n      return (s.fields ?? []).filter((f: any) => ids.has(f.id));\r\n    }\r\n\r\n    return s.fields ?? [];\r\n  }\r\n\r\n  get orderedSections() {\r\n    const s = this.resolvedSchema;\r\n    if (!s || s.formType !== 'single-sectional') return [];\r\n    return [...(s.sections ?? [])].sort((a, b) => (a?.order ?? 0) - (b?.order ?? 0));\r\n  }\r\n\r\n  get isSectional(): boolean {\r\n    return this.resolvedSchema?.formType === 'single-sectional' && this.orderedSections.length > 0;\r\n  }\r\n\r\n  fieldsForSection(sectionId: string): FormFieldSchema[] {\r\n    const s = this.resolvedSchema;\r\n    if (!s) return [];\r\n    const section = (s.sections ?? []).find((x: any) => x.id === sectionId);\r\n    const ids = new Set(section?.fieldIds ?? []);\r\n    return (s.fields ?? []).filter((f: any) => ids.has(f.id));\r\n  }\r\n\r\n  setActiveStep(i: number) {\r\n    this.activeStepIndex = i;\r\n  }\r\n\r\n  // ---------- actions ----------\r\n  onCancel(): void {\r\n    this.cancelled.emit();\r\n  }\r\n\r\n  prevStep(): void {\r\n    this.activeStepIndex = Math.max(0, this.activeStepIndex - 1);\r\n  }\r\n\r\n  nextStep(): void {\r\n    const s = this.resolvedSchema;\r\n    if (!s || s.formType !== 'multi') return;\r\n\r\n    const current = this.visibleFields;\r\n    this.touchFields(current);\r\n    if (this.hasErrors(current)) return;\r\n\r\n    this.activeStepIndex = Math.min(this.totalSteps - 1, this.activeStepIndex + 1);\r\n  }\r\n\r\n  submit(): void {\r\n    if (!this.resolvedSchema || !this.form) return;\r\n\r\n    this.submitError = null;\r\n\r\n    this.form.markAllAsTouched();\r\n\r\n    if (this.form.invalid) {\r\n      const invalid = Object.entries(this.form.controls)\r\n        .filter(([_, c]) => c.invalid)\r\n        .map(([k, c]) => ({ key: k, errors: c.errors }));\r\n      console.table(invalid);\r\n      return;\r\n    }\r\n\r\n    if (this.form.invalid) return;\r\n\r\n    const rawPayload = this.form.value;\r\n    const payload = this.normalizePayload(rawPayload);\r\n\r\n    const action: FormActionSchema | undefined = this.resolvedSchema?.actions;\r\n\r\n    // If no API config, keep old behavior\r\n    const hasApi = !!(action?.submitApiUrl && (action?.method || 'POST'));\r\n    if (!hasApi) {\r\n      this.submitted.emit(payload);\r\n      return;\r\n    }\r\n\r\n    this.isSubmitting = true;\r\n    this.formService\r\n      .submitByAction(action!, payload, this.resolvedSchema as any)\r\n      .pipe(finalize(() => (this.isSubmitting = false)))\r\n      .subscribe({\r\n        next: (res) => {\r\n          this.submitted.emit({\r\n            payload,\r\n            response: res,\r\n            action,\r\n          });\r\n        },\r\n        error: (err) => {\r\n          this.submitError =\r\n            err?.error?.message ?? err?.message ?? 'Failed to submit. Please try again.';\r\n          this.submitFailed.emit(err);\r\n        },\r\n      });\r\n  }\r\n\r\n  private touchFields(fields: FormFieldSchema[]): void {\r\n    if (!this.form) return;\r\n    for (const f of fields as any[]) {\r\n      if (this.isCard(f)) continue;\r\n      const c = this.form.get(this.controlKey(f));\r\n      c?.markAsTouched();\r\n      c?.updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n  private hasErrors(fields: FormFieldSchema[]): boolean {\r\n    if (!this.form) return true;\r\n    return (fields as any[])\r\n      .filter((f) => !this.isCard(f))\r\n      .some((f) => this.form!.get(this.controlKey(f))?.invalid);\r\n  }\r\n\r\n  // ---------- styling helpers ----------\r\n  getFormStyle(): Record<string, any> {\r\n    const sp: any = this.resolvedSchema?.spacing ?? {};\r\n    const st: any = this.resolvedSchema?.style ?? {};\r\n\r\n    return {\r\n      marginTop: px(sp.marginTop),\r\n      marginRight: px(sp.marginRight),\r\n      marginBottom: px(sp.marginBottom),\r\n      marginLeft: px(sp.marginLeft),\r\n      paddingTop: px(sp.paddingTop),\r\n      paddingRight: px(sp.paddingRight),\r\n      paddingBottom: px(sp.paddingBottom),\r\n      paddingLeft: px(sp.paddingLeft),\r\n      backgroundColor: st.backgroundColor ?? null,\r\n      color: st.textColor ?? null,\r\n      borderStyle: st.borderWidth ? 'solid' : null,\r\n      borderWidth: st.borderWidth ? px(st.borderWidth) : null,\r\n      borderColor: st.borderColor ?? null,\r\n      borderRadius: st.borderRadius ? px(st.borderRadius) : null,\r\n    };\r\n  }\r\n\r\n  get submitButtonStyle(): { [key: string]: string } {\r\n    const st: any = this.resolvedSchema?.style ?? {};\r\n    const baseBg = st.buttonBackgroundColor ?? '#111827';\r\n    const baseText = st.buttonTextColor ?? '#ffffff';\r\n    const hoverBg = st.buttonHoverBackgroundColor ?? baseBg;\r\n    const hoverText = st.buttonHoverTextColor ?? baseText;\r\n\r\n    return {\r\n      backgroundColor: this.isSubmitHovered ? hoverBg : baseBg,\r\n      color: this.isSubmitHovered ? hoverText : baseText,\r\n      borderRadius: st.borderRadius ? `${st.borderRadius}px` : '10px',\r\n    };\r\n  }\r\n\r\n  get cancelButtonStyle(): { [key: string]: string } {\r\n    const st: any = this.resolvedSchema?.style ?? {};\r\n    const baseBg = '#FFFFFF';\r\n    const baseText = st.buttonBackgroundColor ?? '#111827';\r\n    const baseBorder = st.buttonBackgroundColor ?? '#111827';\r\n\r\n    const hoverBg = st.buttonHoverBackgroundColor ?? baseBg;\r\n    const hoverText = st.buttonHoverTextColor ?? baseText;\r\n    const hoverBorder = st.buttonHoverBackgroundColor ?? baseBorder;\r\n\r\n    const isHover = this.isCancelHovered;\r\n\r\n    return {\r\n      backgroundColor: isHover ? hoverBg : baseBg,\r\n      color: isHover ? hoverText : baseText,\r\n      border: `1px solid ${isHover ? hoverBorder : baseBorder}`,\r\n      borderRadius: st.borderRadius ? `${st.borderRadius}px` : '10px',\r\n    };\r\n  }\r\n\r\n  isBootstrapIcon(icon: string | null | undefined): boolean {\r\n    const v = (icon || '').trim();\r\n    return v.startsWith('bi ') || v.startsWith('bi-') || v.includes(' bi-');\r\n  }\r\n\r\n  get showCancelButton(): boolean {\r\n    const a: any = this.resolvedSchema?.actions ?? {};\r\n    return a.showCancel !== false;\r\n  }\r\n\r\n  private normalizePayload(payload: Record<string, any>): Record<string, any> {\r\n    const normalized: Record<string, any> = {};\r\n\r\n    for (const field of this.resolvedSchema?.fields ?? []) {\r\n      const key = this.controlKey(field);\r\n      const value = payload[key];\r\n\r\n      //  ONLY for number fields\r\n      if (field.type === 'number') {\r\n        normalized[key] = value === '' || value === undefined ? null : Number(value);\r\n      } else {\r\n        //  Do NOT touch text / other fields\r\n        normalized[key] = value;\r\n      }\r\n    }\r\n\r\n    return normalized;\r\n  }\r\n\r\n  private patchInitialValue(): void {\r\n    if (!this.form || !this.resolvedSchema || !this.initialValue) return;\r\n\r\n    const patch: Record<string, any> = {};\r\n    const inputFields = (this.resolvedSchema.fields ?? []).filter((f: any) => !this.isCard(f));\r\n\r\n    for (const field of inputFields) {\r\n      const key = this.controlKey(field);\r\n\r\n      // allow matching by name or id (in case parent sends either)\r\n      const incoming =\r\n        this.initialValue[key] ??\r\n        (field?.name ? this.initialValue[field.name] : undefined) ??\r\n        (field?.id ? this.initialValue[field.id] : undefined);\r\n\r\n      if (incoming === undefined) continue;\r\n\r\n      // File inputs: cannot set the actual <input type=file> UI value.\r\n      // Best practice: ignore or store separately to display \"existing files\".\r\n      if (field.type === 'file') {\r\n        // If you still want the FormControl to hold metadata, you can:\r\n        // patch[key] = incoming; // e.g., [{name,url}]\r\n        continue;\r\n      }\r\n\r\n      // Normalize common types\r\n      if (field.type === 'number') {\r\n        patch[key] = incoming === '' || incoming === null ? null : Number(incoming);\r\n        continue;\r\n      }\r\n\r\n      if (field.type === 'checkbox') {\r\n        patch[key] = incoming === true || incoming === 'true' || incoming === 1 || incoming === '1';\r\n        continue;\r\n      }\r\n\r\n      // date expects yyyy-mm-dd for <input type=\"date\">\r\n      if (field.type === 'date' && incoming) {\r\n        patch[key] = String(incoming).slice(0, 10);\r\n        continue;\r\n      }\r\n\r\n      patch[key] = incoming;\r\n    }\r\n\r\n    // only patch existing controls\r\n    this.form.patchValue(patch, { emitEvent: false });\r\n\r\n    // optional: keep form “clean” after prefill\r\n    this.form.markAsPristine();\r\n    this.form.markAsUntouched();\r\n  }\r\n\r\n  isButton(field: any): boolean {\r\n    return (field?.type ?? '') === 'button';\r\n  }\r\n\r\n  private isNonInput(field: any): boolean {\r\n    const t = field?.type;\r\n    return t === 'card' || t === 'info-card' || t === 'button';\r\n  }\r\n\r\n  private normalizeFormValue(): Record<string, any> {\r\n    if (!this.form) return {};\r\n    const raw = this.form.value;\r\n    const normalized: Record<string, any> = {};\r\n\r\n    for (const field of this.resolvedSchema?.fields ?? []) {\r\n      if (this.isNonInput(field)) continue;\r\n      const key = this.controlKey(field);\r\n      const value = raw[key];\r\n      normalized[key] =\r\n        field.type === 'number'\r\n          ? value === '' || value === undefined\r\n            ? null\r\n            : Number(value)\r\n          : value;\r\n    }\r\n    return normalized;\r\n  }\r\n\r\n  onSchemaButtonClick(field: any): void {\r\n    const btn = field?.button;\r\n    const endpoint = btn?.api;\r\n    if (!btn || (btn.actionType === 'API_CALL' && !endpoint)) return;\r\n\r\n    // default true\r\n    const triggerValidation = btn.triggerValidation !== false;\r\n\r\n    if (triggerValidation) {\r\n      const scope = this.isMultiStep ? this.visibleFields : this.resolvedSchema?.fields ?? [];\r\n      this.touchFields(scope.filter((f: any) => !this.isNonInput(f)));\r\n      if (this.hasErrors(scope.filter((f: any) => !this.isNonInput(f)))) return;\r\n    }\r\n\r\n    const formValue = this.normalizeFormValue();\r\n    this.buttonLoading[field.id] = true;\r\n    delete this.buttonFeedback[field.id];\r\n\r\n    this.apiExec\r\n      .execute(endpoint!, { formValue })\r\n      .pipe(finalize(() => (this.buttonLoading[field.id] = false)))\r\n      .subscribe({\r\n        next: () => {\r\n          this.buttonFeedback[field.id] = {\r\n            type: 'success',\r\n            message: btn.successMessage || 'Action completed successfully.',\r\n          };\r\n        },\r\n        error: (err) => {\r\n          this.buttonFeedback[field.id] = {\r\n            type: 'error',\r\n            message: btn.errorMessage || err?.error?.message || err?.message || 'Action failed.',\r\n          };\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\nfunction px(v: any): string | null {\r\n  if (v === undefined || v === null) return null;\r\n  const n = Number(v);\r\n  return Number.isFinite(n) ? `${n}px` : null;\r\n}\r\n","<div class=\"w-full h-full flex flex-col mb-6 overflow-auto\">\r\n\r\n    <!-- Loading -->\r\n    <div *ngIf=\"isLoading\" class=\"flex items-center justify-center p-6 text-sm text-gray-600\">\r\n        Loading form…\r\n    </div>\r\n\r\n    <!-- Error -->\r\n    <div *ngIf=\"loadError\" class=\"p-3 rounded border border-red-200 bg-red-50 text-red-700 text-sm\">\r\n        {{ loadError }}\r\n    </div>\r\n\r\n    <!-- Empty -->\r\n    <div *ngIf=\"!isLoading && !loadError && (!resolvedSchema?.fields || resolvedSchema.fields.length === 0)\"\r\n        class=\"flex justify-center items-center h-100 border border-dotted border-gray-300 rounded-xl bg-white\">\r\n        <h2 class=\"text-sm text-gray-600\">No fields found for this form schema.</h2>\r\n    </div>\r\n\r\n    <form *ngIf=\"!isLoading && !loadError && resolvedSchema?.fields?.length && form\" [formGroup]=\"form\" class=\"text-sm\"\r\n        [ngStyle]=\"getFormStyle()\" [ngClass]=\"resolvedSchema?.style?.formClass || ''\" (ngSubmit)=\"submit()\">\r\n        <h2 class=\"text-2xl my-2\">{{ resolvedSchema.name }}</h2>\r\n\r\n        <p *ngIf=\"resolvedSchema.description\" class=\"text-[13px] text-gray-500 mb-4\">\r\n            {{ resolvedSchema.description }}\r\n        </p>\r\n\r\n        <!-- MULTI STEP PROGRESS -->\r\n        <div *ngIf=\"isMultiStep\" class=\"w-full mb-6 flex flex-col items-center my-3\">\r\n\r\n            <!-- progress bar -->\r\n            <div class=\"w-full h-1 bg-gray-200 rounded-full relative mb-6\">\r\n                <div class=\"h-1 rounded-full transition-all duration-300\" [ngStyle]=\"{\r\n                width: ((activeStepIndex + 1) / totalSteps) * 100 + '%',\r\n                backgroundColor: submitButtonStyle['backgroundColor']\r\n              }\">\r\n                </div>\r\n            </div>\r\n\r\n            <!-- step circles -->\r\n            <div class=\"flex items-center justify-center gap-10\">\r\n                <div *ngFor=\"let step of orderedSteps; let i = index\" class=\"flex flex-col items-center cursor-pointer\"\r\n                    (click)=\"setActiveStep(i)\">\r\n\r\n                    <div class=\"w-10 h-10 flex items-center justify-center rounded-full border-2 transition-all duration-300\"\r\n                        [ngStyle]=\"\r\n                  i === activeStepIndex\r\n                    ? {\r\n                        backgroundColor: submitButtonStyle['backgroundColor'],\r\n                        borderColor: submitButtonStyle['backgroundColor'],\r\n                        color: submitButtonStyle['color']\r\n                      }\r\n                    : {\r\n                        backgroundColor: '#FFFFFF',\r\n                        borderColor: '#9CA3AF',\r\n                        color: '#374151'\r\n                      }\r\n                \">\r\n\r\n                        <!-- if no icon -->\r\n                        <ng-container *ngIf=\"!step.icon\">\r\n                            {{ i + 1 }}\r\n                        </ng-container>\r\n\r\n                        <!-- if icon -->\r\n                        <ng-container *ngIf=\"step.icon\">\r\n                            <i [class]=\"step.icon\" class=\"text-lg\" [ngStyle]=\"\r\n                      i === activeStepIndex\r\n                        ? { color: submitButtonStyle['color'] }\r\n                        : { color: '#6B7280' }\r\n                    \">\r\n                            </i>\r\n                        </ng-container>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"mt-2 text-xs text-gray-600 font-medium\">\r\n                        {{ step.label }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"visibleFields.length === 0\" class=\"text-xs text-gray-500 my-5\">\r\n                No fields assigned to this step yet.\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- SINGLE-SECTIONAL MODE -->\r\n        <div *ngIf=\"isSectional; else normalOrMulti\">\r\n            <div *ngFor=\"let sec of orderedSections\" class=\"mb-6\">\r\n                <div class=\"flex items-center justify-between mb-2 border-b border-gray-200 pb-2\">\r\n                    <h3 class=\"text-[11px] font-semibold uppercase text-blue-700\">{{ sec.label }}</h3>\r\n                    <span class=\"text-[11px] text-gray-500\">{{ fieldsForSection(sec.id).length }} fields</span>\r\n                </div>\r\n\r\n                <div class=\"grid\" [ngStyle]=\"{\r\n            'grid-template-columns': 'repeat(' + (resolvedSchema.layout?.columns || 1) + ', minmax(0, 1fr))',\r\n            'column-gap': (resolvedSchema.spacing?.gapX ?? 12) + 'px',\r\n            'row-gap': (resolvedSchema.spacing?.gapY ?? 12) + 'px'\r\n          }\">\r\n                    <div *ngFor=\"let field of fieldsForSection(sec.id); trackBy: trackByFieldId\"\r\n                        [ngStyle]=\"{ 'grid-column': 'span ' + (field.colSpan || 1) }\"\r\n                        [ngClass]=\"resolvedSchema.style?.fieldWrapperClass || 'mb-3'\">\r\n                        <ng-container *ngTemplateOutlet=\"fieldRenderer; context: { $implicit: field }\"></ng-container>\r\n                    </div>\r\n                </div>\r\n\r\n                <div *ngIf=\"fieldsForSection(sec.id).length === 0\" class=\"text-xs text-gray-500 mt-2\">\r\n                    No fields in this section yet.\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- NORMAL (single) + MULTI -->\r\n        <ng-template #normalOrMulti>\r\n            <div class=\"grid\" [ngStyle]=\"{\r\n          'grid-template-columns': 'repeat(' + (resolvedSchema.layout?.columns || 1) + ', minmax(0, 1fr))',\r\n          'column-gap': (resolvedSchema.spacing?.gapX ?? 12) + 'px',\r\n          'row-gap': (resolvedSchema.spacing?.gapY ?? 12) + 'px'\r\n        }\">\r\n                <div *ngFor=\"let field of visibleFields; trackBy: trackByFieldId\"\r\n                    [ngStyle]=\"{ 'grid-column': 'span ' + (field.colSpan || 1) }\"\r\n                    [ngClass]=\"resolvedSchema.style?.fieldWrapperClass || 'mb-3'\">\r\n                    <ng-container *ngTemplateOutlet=\"fieldRenderer; context: { $implicit: field }\"></ng-container>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n\r\n        <!-- Multi-step nav -->\r\n        <div *ngIf=\"isMultiStep\" class=\"mt-4 flex items-center justify-between text-xs\">\r\n            <button type=\"button\" class=\"px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50\"\r\n                (click)=\"prevStep()\" [disabled]=\"activeStepIndex === 0\">\r\n                ← Previous step\r\n            </button>\r\n\r\n            <button type=\"button\" class=\"px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50\"\r\n                (click)=\"nextStep()\" [disabled]=\"activeStepIndex === totalSteps - 1\">\r\n                Next step →\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Submit error (API) -->\r\n        <div *ngIf=\"submitError\" class=\"mt-3 p-3 rounded border border-red-200 bg-red-50 text-red-700 text-sm\">\r\n            {{ submitError }}\r\n        </div>\r\n\r\n        <!-- Actions -->\r\n        <div class=\"mt-4 flex items-center gap-2\">\r\n            <button type=\"submit\" (mouseenter)=\"isSubmitHovered = true\" (mouseleave)=\"isSubmitHovered = false\"\r\n                [ngStyle]=\"submitButtonStyle\" [disabled]=\"isSubmitting\"\r\n                [ngClass]=\"resolvedSchema.style?.buttonClass || 'px-4 py-2 rounded text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed'\">\r\n                {{ isSubmitting ? 'Submitting...' : (resolvedSchema.actions?.submitLabel || 'Submit') }}\r\n            </button>\r\n\r\n            <button *ngIf=\"showCancelButton\" type=\"button\" (click)=\"onCancel()\" (mouseenter)=\"isCancelHovered = true\"\r\n                (mouseleave)=\"isCancelHovered = false\" [disabled]=\"isSubmitting\" [ngStyle]=\"cancelButtonStyle\"\r\n                [ngClass]=\"resolvedSchema.style?.buttonClass || 'px-4 py-2 rounded text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed'\">\r\n                {{ resolvedSchema.actions?.cancelLabel || 'Cancel' }}\r\n            </button>\r\n        </div>\r\n\r\n\r\n        <!-- Field renderer template -->\r\n        <ng-template #fieldRenderer let-field>\r\n            <!-- INFO CARD (non-input block) -->\r\n            <ng-container *ngIf=\"isCard(field); else notCard\">\r\n                <div [ngStyle]=\"cardStyle(field)\" class=\"w-full flex items-start gap-3\">\r\n                    <!-- Icon -->\r\n                    <div class=\"shrink-0 mt-0.5 text-lg leading-none\" [ngStyle]=\"cardIconStyle(field)\">\r\n                        <i *ngIf=\"isBootstrapIcon(cardIcon(field))\" [class]=\"cardIcon(field)\"></i>\r\n                        <span *ngIf=\"!isBootstrapIcon(cardIcon(field))\">{{ cardIcon(field) }}</span>\r\n                    </div>\r\n\r\n                    <!-- Content -->\r\n                    <div class=\"min-w-0\">\r\n                        <div class=\"text-sm font-semibold leading-tight\">\r\n                            {{ cardTitle(field) }}\r\n                        </div>\r\n\r\n                        <div *ngIf=\"cardBody(field)\" class=\"mt-1 text-xs opacity-90\">\r\n                            {{ cardBody(field) }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n\r\n            <ng-template #notCard>\r\n\r\n                <!-- BUTTON (non-input block) -->\r\n                <ng-container *ngIf=\"isButton(field); else inputField\">\r\n                    <div class=\"w-full\">\r\n                        <button type=\"button\" (click)=\"onSchemaButtonClick(field)\" [disabled]=\"buttonLoading[field.id]\"\r\n                            class=\"px-4 py-2 rounded-lg text-sm font-semibold border transition\" [ngClass]=\"[\r\n                                  (field.button?.styleVariant || 'primary') === 'primary' ? 'bg-blue-600 text-white border-blue-600 hover:bg-blue-700' :\r\n                                  (field.button?.styleVariant || 'primary') === 'danger' ? 'bg-red-600 text-white border-red-600 hover:bg-red-700' :\r\n                                  'bg-white text-slate-700 border-slate-300 hover:bg-slate-50'\r\n                                ]\">\r\n                            {{ field.button?.label || field.label }}\r\n                            <span *ngIf=\"buttonLoading[field.id]\" class=\"ml-2 text-xs opacity-80\">…</span>\r\n                        </button>\r\n\r\n                        <div *ngIf=\"buttonFeedback[field.id]\" class=\"mt-2 text-xs rounded-lg px-3 py-2 border\"\r\n                            [ngClass]=\"buttonFeedback[field.id].type === 'success'\r\n                               ? 'bg-emerald-50 border-emerald-200 text-emerald-800'\r\n                               : 'bg-rose-50 border-rose-200 text-rose-800'\">\r\n                            {{ buttonFeedback[field.id].message }}\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n\r\n\r\n                <!-- INPUT FIELD -->\r\n                <ng-template #inputField>\r\n                    <label [ngClass]=\"resolvedSchema?.style?.labelClass || 'block text-sm font-medium mb-1'\">\r\n                        {{ field.label }}\r\n                        <span\r\n                            *ngIf=\"field.required === true || field.required === 'true' || field.validations?.required\"\r\n                            class=\"text-red-500\">*</span>\r\n                    </label>\r\n\r\n                    <ng-container [ngSwitch]=\"field.type\">\r\n\r\n                        <!-- TEXT -->\r\n                        <ng-container *ngSwitchCase=\"'text'\">\r\n                            <input type=\"text\" [placeholder]=\"field.placeholder\" [formControlName]=\"controlKey(field)\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\" />\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600 space-y-0.5\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">This field is required.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['minlength']\">\r\n                                    Minimum {{ field.validations?.minLength }} characters required.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['maxlength']\">\r\n                                    Maximum {{ field.validations?.maxLength }} characters allowed.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['pattern']\">Value does not match the required pattern.\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- PASSWORD -->\r\n                        <ng-container *ngSwitchCase=\"'password'\">\r\n                            <input type=\"password\" [placeholder]=\"field.placeholder\"\r\n                                [formControlName]=\"controlKey(field)\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\" />\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600 space-y-0.5\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">This field is required.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['minlength']\">\r\n                                    Minimum {{ field.validations?.minLength }} characters required.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['maxlength']\">\r\n                                    Maximum {{ field.validations?.maxLength }} characters allowed.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['pattern']\">Value does not match the required pattern.\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- NUMBER -->\r\n                        <ng-container *ngSwitchCase=\"'number'\">\r\n                            <input type=\"number\" [placeholder]=\"field.placeholder\" [formControlName]=\"controlKey(field)\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\" />\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600 space-y-0.5\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">This field is required.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['min']\">Value should be ≥ {{ field.validations?.min\r\n                                    }}.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['max']\">Value should be ≤ {{ field.validations?.max\r\n                                    }}.</div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- EMAIL -->\r\n                        <ng-container *ngSwitchCase=\"'email'\">\r\n                            <input type=\"email\" [placeholder]=\"field.placeholder\" [formControlName]=\"controlKey(field)\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\" />\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600 space-y-0.5\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">This field is required.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['email']\">Please enter a valid email address.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['minlength']\">\r\n                                    Minimum {{ field.validations?.minLength }} characters required.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['maxlength']\">\r\n                                    Maximum {{ field.validations?.maxLength }} characters allowed.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['pattern']\">Value does not match the required pattern.\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- TEXTAREA -->\r\n                        <ng-container *ngSwitchCase=\"'textarea'\">\r\n                            <textarea [placeholder]=\"field.placeholder\" [formControlName]=\"controlKey(field)\" rows=\"4\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\"></textarea>\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600 space-y-0.5\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">This field is required.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['minlength']\">\r\n                                    Minimum {{ field.validations?.minLength }} characters required.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['maxlength']\">\r\n                                    Maximum {{ field.validations?.maxLength }} characters allowed.\r\n                                </div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['pattern']\">Value does not match the required pattern.\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- SELECT -->\r\n                        <ng-container *ngSwitchCase=\"'select'\">\r\n                            <select [formControlName]=\"controlKey(field)\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\">\r\n                                <option [ngValue]=\"null\" disabled>\r\n                                    {{ field.placeholder || 'Select an option' }}\r\n                                </option>\r\n                                <option *ngFor=\"let opt of field.options || []\" [ngValue]=\"opt.value\">\r\n                                    {{ opt.label }}\r\n                                </option>\r\n                            </select>\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">Please select an option.</div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- CHECKBOX -->\r\n                        <ng-container *ngSwitchCase=\"'checkbox'\">\r\n                            <div class=\"flex items-center gap-2\">\r\n                                <input type=\"checkbox\" [formControlName]=\"controlKey(field)\" />\r\n                                <span class=\"text-xs text-gray-700\">Check</span>\r\n                            </div>\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['requiredTrue']\">Please check this box.</div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- RADIO -->\r\n                        <ng-container *ngSwitchCase=\"'radio'\">\r\n                            <div\r\n                                [ngClass]=\"field.optionDirection === 'horizontal' ? 'flex flex-row gap-4 items-center' : 'flex flex-col gap-1'\">\r\n                                <label *ngFor=\"let opt of field.options || []\"\r\n                                    class=\"inline-flex items-center gap-2 text-xs text-gray-700\">\r\n                                    <input type=\"radio\" [value]=\"opt.value\" [formControlName]=\"controlKey(field)\" />\r\n                                    <span>{{ opt.label }}</span>\r\n                                </label>\r\n                            </div>\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">Please choose an option.</div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- DATE -->\r\n                        <ng-container *ngSwitchCase=\"'date'\">\r\n                            <input type=\"date\" [formControlName]=\"controlKey(field)\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\" />\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600 space-y-0.5\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">This field is required.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['min']\">Date should be on or after {{\r\n                                    field.validations?.min\r\n                                    }}.</div>\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['max']\">Date should be on or before {{\r\n                                    field.validations?.max\r\n                                    }}.</div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- FILE -->\r\n                        <ng-container *ngSwitchCase=\"'file'\">\r\n                            <div class=\"flex flex-col gap-2\">\r\n                                <div class=\"flex items-center gap-2\">\r\n                                    <input #fileInput type=\"file\" [attr.accept]=\"field.accept || null\"\r\n                                        [attr.multiple]=\"field.multiple ? '' : null\"\r\n                                        (change)=\"onFileChange($event, field)\" (blur)=\"ctrl(field)?.markAsTouched()\"\r\n                                        [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\" />\r\n\r\n                                    <button *ngIf=\"fileNames(field).length\" type=\"button\"\r\n                                        class=\"px-2 py-1 text-[11px] border border-gray-300 rounded hover:bg-gray-100\"\r\n                                        (click)=\"clearFiles(field, fileInput)\">\r\n                                        Clear\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div class=\"text-[11px] text-gray-500\">\r\n                                    <span *ngIf=\"field.accept\">Allowed: {{ field.accept }}</span>\r\n                                    <span *ngIf=\"field.maxSizeMB\"> • Max {{ field.maxSizeMB }}MB per file</span>\r\n                                    <span *ngIf=\"field.maxFiles\"> • Max {{ field.maxFiles }} file(s)</span>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"fileNames(field).length\" class=\"text-[11px] text-gray-600\">\r\n                                    Selected: {{ fileNames(field).join(', ') }}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div *ngIf=\"showError(field)\" class=\"mt-1 text-[11px] text-red-600 space-y-0.5\">\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['required']\">This field is required.</div>\r\n\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['maxFiles']\">\r\n                                    You can upload up to {{ ctrl(field)?.errors?.['maxFiles']?.max }} file(s).\r\n                                </div>\r\n\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['maxSizeMB']\">\r\n                                    {{ ctrl(field)?.errors?.['maxSizeMB']?.file }} is too large. Max\r\n                                    {{ ctrl(field)?.errors?.['maxSizeMB']?.max }}MB.\r\n                                </div>\r\n\r\n                                <div *ngIf=\"ctrl(field)?.errors?.['accept']\">\r\n                                    {{ ctrl(field)?.errors?.['accept']?.file }} is not an allowed file type.\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <!-- DEFAULT -->\r\n                        <ng-container *ngSwitchDefault>\r\n                            <input type=\"text\" [placeholder]=\"field.placeholder\" [formControlName]=\"controlKey(field)\"\r\n                                [ngClass]=\"resolvedSchema?.style?.inputClass || 'w-full border border-gray-300 rounded px-2 py-1 text-sm'\" />\r\n                        </ng-container>\r\n\r\n                    </ng-container>\r\n                </ng-template>\r\n            </ng-template>\r\n        </ng-template>\r\n    </form>\r\n</div>","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.AmigoFormService","i2.AmigoApiExecutionService"],"mappings":"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"}